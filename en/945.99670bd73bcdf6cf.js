"use strict";(self.webpackChunkelogger=self.webpackChunkelogger||[]).push([[945],{1945:(Pt,_e,g)=>{g.r(_e),g.d(_e,{LogsModule:()=>Mt});var d=g(9808),Q=g(3618),s=g(5620),L=g(9783),ne=g(9841),R=g(9300),u=g(4004),D=g(3900),C=g(3423),z=g(8838),q=g(2656);const X=(0,s.PH)("[Log] Load Log",(0,s.Ky)()),ie=(0,s.PH)("[Log] Load Log Success",(0,s.Ky)()),j=(0,s.PH)("[Log] Load Log Failure",(0,s.Ky)()),k=(0,s.PH)("[Log] Create Log",(0,s.Ky)()),F=(0,s.PH)("[Log] Create Log Failure",(0,s.Ky)()),V=(0,s.PH)("[Log] Update Log",(0,s.Ky)()),$=(0,s.PH)("[Log] Update Log Failure",(0,s.Ky)()),K=(0,s.PH)("[Log] Delete Log",(0,s.Ky)()),Y=(0,s.PH)("[Log] Delete Log Failure",(0,s.Ky)());var P=g(9463),Te=g(8803);const ae={log:null,processing:!1,error:null},Se=(0,s.Lq)(ae,(0,s.on)(X,t=>Object.assign(Object.assign({},t),{processing:!0})),(0,s.on)(ie,(t,n)=>Object.assign(Object.assign({},t),{log:n.log,processing:!1})),(0,s.on)(j,(t,n)=>Object.assign(Object.assign({},t),{error:n.error,processing:!1})),(0,s.on)(k,(t,n)=>Object.assign(Object.assign({},t),{processing:!0})),(0,s.on)(P.zS,(t,n)=>Object.assign(Object.assign({},t),{log:n.log,processing:!1})),(0,s.on)(F,(t,n)=>Object.assign(Object.assign({},t),{error:n.error,processing:!1})),(0,s.on)(V,(t,n)=>Object.assign(Object.assign({},t),{processing:!0})),(0,s.on)(P.S4,(t,n)=>Object.assign(Object.assign({},t),{log:n.log,processing:!1})),(0,s.on)($,(t,n)=>Object.assign(Object.assign({},t),{error:n.error,processing:!1})),(0,s.on)(K,(t,n)=>Object.assign(Object.assign({},t),{processing:!0})),(0,s.on)(P.RC,(t,n)=>Object.assign({},ae)),(0,s.on)(Y,(t,n)=>Object.assign(Object.assign({},t),{error:n.error,processing:!1})),(0,s.on)(C.iz,(t,n)=>Object.assign(Object.assign({},t),{log:Object.assign(Object.assign({},t.log),{recordsCount:t.log.recordsCount+1})})),(0,s.on)(C.S5,(t,n)=>Object.assign(Object.assign({},t),{log:Object.assign(Object.assign({},t.log),{recordsCount:t.log.recordsCount-1})})),(0,s.on)(C.Qu,(t,n)=>Object.assign(Object.assign({},t),{log:Object.assign(Object.assign({},t.log),{recordsCount:0})})),(0,s.on)(Te.hP,(t,n)=>Object.assign(Object.assign({},t),{log:null}))),se=(0,s.ZF)("log"),Z=(0,s.P1)(se,t=>t.log);(0,s.P1)(se,t=>t.processing);var W=g(2779),re=g(51),ce=g(7609),e=g(5e3),I=g(9177),ee=g(8061),U=g(1424),S=g(845),f=g(5787),T=g(8854),pe=g(2796),v=g(2653),fe=g(8850),y=g(7158),ge=g(1410),B=g(1941);function De(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",9)(1,"button",10),e.NdJ("click",function(){return e.CHM(o),e.oxw(4).revokeRecord()}),e.qZA()()}if(2&t){const o=e.oxw(3).ngrxLet,_=e.oxw();e.xp6(1),e.Q6J("disabled",!(null!=_.records&&_.records.length)||o)}}function he(t,n){1&t&&e.YNc(0,De,2,1,"ng-template",8)}function Ge(t,n){if(1&t&&(e.TgZ(0,"th",15),e._uU(1),e.qZA()),2&t){const o=e.oxw(4);e.xp6(1),e.Oqu(o.cols[1].header)}}function Ae(t,n){if(1&t&&(e.TgZ(0,"th",16),e._uU(1),e.qZA()),2&t){const o=e.oxw(4);e.xp6(1),e.Oqu(o.cols[4].header)}}const de=function(t,n){return{"text-center":t,"text-right":n}};function ve(t,n){if(1&t&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.YNc(4,Ge,2,1,"th",11),e.TgZ(5,"th",12),e._uU(6),e.qZA(),e.TgZ(7,"th",13),e._uU(8),e.qZA(),e.YNc(9,Ae,2,1,"th",14),e.qZA()),2&t){const o=e.oxw().ngrxLet,_=e.oxw(2);e.xp6(3),e.Oqu(_.cols[0].header),e.xp6(1),e.Q6J("ngIf",o.containData&&_.hasData(_.records)&&_.showDataColumn),e.xp6(2),e.Oqu(_.cols[2].header),e.xp6(1),e.Q6J("ngClass",e.WLB(6,de,o.containStart,!o.containStart)),e.xp6(1),e.Oqu(_.cols[3].header),e.xp6(1),e.Q6J("ngIf",o.containStart)}}function xe(t,n){if(1&t&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&t){const o=e.oxw(5);e.xp6(1),e.Oqu(o.cols[1].header)}}function Ne(t,n){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&t){const o=e.oxw(2).$implicit;e.xp6(1),e.Oqu(o.data)}}function be(t,n){if(1&t&&e._UZ(0,"p-image",28),2&t){const o=e.oxw().ngIf;e.Q6J("src",o)("preview",!0)}}function Me(t,n){if(1&t&&(e._UZ(0,"audio",29),e.ALo(1,"bypassSecurityTrustUrl")),2&t){const o=e.oxw().ngIf;e.Q6J("src",e.lcZ(1,1,o),e.LSH)}}function Pe(t,n){if(1&t&&(e.ynx(0),e.YNc(1,be,1,2,"p-image",26),e.YNc(2,Me,2,3,"audio",27),e.BQk()),2&t){const o=e.oxw(3).$implicit,_=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.eventType===_.EventType.PHOTO),e.xp6(1),e.Q6J("ngIf",o.eventType===_.EventType.AUDIO)}}function Ie(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Pe,3,2,"ng-container",4),e.ALo(2,"async"),e.BQk()),2&t){const o=e.oxw(2).$implicit,_=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,_.loadRecordData(o.key)))}}const Ue=function(t,n){return[t,n]};function ye(t,n){if(1&t&&(e.TgZ(0,"td",18),e.YNc(1,xe,2,1,"span",25),e.YNc(2,Ne,2,1,"span",14),e.YNc(3,Ie,3,3,"ng-container",4),e.qZA()),2&t){const o=e.oxw().$implicit,_=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.eventType===_.EventType.TEXT),e.xp6(1),e.Q6J("ngIf",o.eventType===_.EventType.TEXT),e.xp6(1),e.Q6J("ngIf",e.WLB(3,Ue,_.EventType.AUDIO,_.EventType.PHOTO).includes(o.eventType))}}function $e(t,n){if(1&t&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().ngIf;e.xp6(1),e.hij("",o.days,"d\xa0")}}function Ze(t,n){if(1&t&&(e.TgZ(0,"span",16),e.YNc(1,$e,2,1,"span",30),e.TgZ(2,"span",31),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&t){const o=n.ngIf;e.xp6(1),e.Q6J("ngIf",o.days),e.xp6(2),e.Oqu(e.Dn7(4,2,o.time,"HH:mm:ss.SSS","UTC+0"))}}function we(t,n){if(1&t&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().ngIf;e.xp6(1),e.hij("",o.days,"d\xa0")}}function Qe(t,n){if(1&t&&(e.TgZ(0,"span",16)(1,"span",31),e._uU(2),e.qZA(),e.YNc(3,we,2,1,"span",30),e.TgZ(4,"span",31),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&t){const o=n.ngIf;e.xp6(2),e.hij("",o.prefix,"\xa0"),e.xp6(1),e.Q6J("ngIf",o.days),e.xp6(2),e.Oqu(e.Dn7(6,3,o.time,"HH:mm:ss.SSS","UTC+0"))}}function qe(t,n){if(1&t&&(e.TgZ(0,"td",32)(1,"span",19),e._uU(2),e.qZA(),e.YNc(3,Qe,7,7,"span",14),e.ALo(4,"eventRelTime"),e.qZA()),2&t){const o=e.oxw().$implicit,_=e.oxw(3);e.xp6(2),e.Oqu(_.cols[4].header),e.xp6(1),e.Q6J("ngIf",e.xi3(4,2,o,_.records))}}function Be(t,n){if(1&t&&(e.TgZ(0,"tr"),e.ALo(1,"colorClass"),e.TgZ(2,"td",17),e._UZ(3,"i"),e.qZA(),e.TgZ(4,"td",18)(5,"span",19),e._uU(6),e.qZA(),e.TgZ(7,"span",16),e._uU(8),e.qZA()(),e.YNc(9,ye,4,6,"td",20),e.TgZ(10,"td",21)(11,"span",22),e._uU(12),e.qZA(),e.TgZ(13,"span",16),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"td",23)(17,"span",22),e._uU(18),e.qZA(),e.YNc(19,Ze,5,6,"span",14),e.ALo(20,"eventTimeDiff"),e.qZA(),e.YNc(21,qe,5,5,"td",24),e.qZA()),2&t){const o=n.$implicit,_=e.oxw().ngrxLet,i=e.oxw(2);e.Tol(e.lcZ(1,15,o.color)),e.xp6(3),e.MT6("",o.icon.value," ",o.icon.styleClass,""),e.xp6(3),e.Oqu(i.cols[0].header),e.xp6(2),e.Oqu(o.name),e.xp6(1),e.Q6J("ngIf",_.containData&&i.hasData(i.records)&&i.showDataColumn),e.xp6(3),e.Oqu(i.cols[2].header),e.xp6(2),e.Oqu(e.xi3(15,17,o.date,"medium")),e.xp6(2),e.Q6J("ngClass",e.WLB(23,de,_.containStart,!_.containStart)),e.xp6(2),e.Oqu(i.cols[3].header),e.xp6(1),e.Q6J("ngIf",e.xi3(20,20,o,i.records)),e.xp6(2),e.Q6J("ngIf",_.containStart)}}function Je(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td",12),e.SDv(2,33),e.qZA()()),2&t){const o=e.oxw().ngrxLet;e.xp6(1),e.uIk("colspan",4+o.additionalColumns)}}function Xe(t,n){if(1&t&&(e.TgZ(0,"p-table",2,3),e.YNc(2,he,1,0,null,4),e.YNc(3,ve,10,9,"ng-template",5),e.YNc(4,Be,22,26,"ng-template",6),e.YNc(5,Je,3,1,"ng-template",7),e.qZA()),2&t){const o=e.oxw().ngrxLet,_=e.oxw();e.Q6J("responsiveLayout",_.responsiveLayout)("breakpoint",_.breakpoint)("styleClass",_.styleClass)("rowHover",!0)("loading",!_.showRevokeButton&&o)("value",_.records),e.xp6(2),e.Q6J("ngIf",_.showRevokeButton)}}function Ye(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Xe,6,7,"p-table",1),e.ALo(2,"logEventTemplates"),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngrxLet",e.lcZ(2,1,o.template))}}let Ee=(()=>{class t{constructor(o,_){this.store=o,this.recordService=_,this.EventType=T.t,this.responsiveLayout="stack",this.breakpoint="960px",this.showRevokeButton=!1,this.cols=[{header:$localize`:Event column@@RecordsComponent\:eventColumn:Event`},{header:$localize`:Data column@@RecordsComponent\:dataColumn:Data`},{header:$localize`:Absolute time column@@RecordsComponent\:absoluteTimeColumn:Absolute Time`},{header:$localize`:Time difference column@@RecordsComponent\:timeDifferenceCol:Time Difference`},{header:$localize`:Relative time column@@RecordsComponent\:relativeTimeColumn:Relative Time`}],this.processingRevoke$=this.store.pipe((0,s.Ys)(z.WC)),this.mediaData={}}hasData(o){return!!(null==o?void 0:o.find(_=>{var i;return!!(null===(i=_.data)||void 0===i?void 0:i.length)}))}revokeRecord(){var o;(null===(o=this.records)||void 0===o?void 0:o.length)&&this.store.dispatch((0,C.V3)({logId:this.records[0].logId}))}loadRecordData(o){return this.mediaData[o]||(this.mediaData[o]=this.recordService.loadRecordData(o)),this.mediaData[o]}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(pe.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-records"]],inputs:{records:"records",template:"template",styleClass:"styleClass",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",showDataColumn:"showDataColumn",showRevokeButton:"showRevokeButton"},decls:1,vars:1,consts:function(){let n,o;return n=$localize`:Revoke button@@RecordsComponent\:revokeButton:Revoke last record`,o=$localize`:Empty table message@@RecordsComponent\:empty: No records found. `,[[4,"ngrxLet"],["dataKey","name",3,"responsiveLayout","breakpoint","styleClass","rowHover","loading","value",4,"ngrxLet"],["dataKey","name",3,"responsiveLayout","breakpoint","styleClass","rowHover","loading","value"],["dt",""],[4,"ngIf"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","caption"],[1,"p-2"],["pButton","","pRipple","","icon","pi pi-replay","iconPos","right","label",n,1,"p-button-outlined","p-button-rounded","p-button-danger","w-full",3,"disabled","click"],["class","text-center w-min lg:w-5 xl:w-3",4,"ngIf"],[1,"text-center"],[3,"ngClass"],["class","text-right",4,"ngIf"],[1,"text-center","w-min","lg:w-5","xl:w-3"],[1,"text-right"],[1,"text-center","w-3rem"],[1,"justify-content-between"],[1,"p-column-title","font-light"],["class","justify-content-between",4,"ngIf"],[1,"justify-content-between","text-center"],[1,"p-column-title","font-light","text-left"],[1,"justify-content-between",3,"ngClass"],["class","justify-content-between text-right",4,"ngIf"],["class","p-column-title font-light",4,"ngIf"],[3,"src","preview",4,"ngIf"],["class","w-full","controls","",3,"src",4,"ngIf"],[3,"src","preview"],["controls","",1,"w-full",3,"src"],["class","el-font-monospace",4,"ngIf"],[1,"el-font-monospace"],[1,"justify-content-between","text-right"],o]},template:function(o,_){1&o&&e.YNc(0,Ye,3,3,"ng-container",0),2&o&&e.Q6J("ngrxLet",_.processingRevoke$)},directives:[I.eJ,v.iA,d.O5,L.jx,S.Hq,f.H,d.mk,fe.E],pipes:[y.fS,ge.z,d.Ov,B.T3,d.uU,B.NC,B.L2],styles:["[_nghost-%COMP%]     td p-image img:not(.p-image-preview){max-width:100%;border-radius:6px}"]}),t})();var p=g(3075),Oe=g(8505),ue=g(5698),J=g(1157),w=g(895),x=g(1456),N=g(5315);function He(t,n){1&t&&(e.TgZ(0,"div",11)(1,"span",12),e.SDv(2,13),e.qZA()())}function ze(t,n){1&t&&(e.TgZ(0,"div",11)(1,"span",12),e.SDv(2,14),e.qZA()())}function je(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw().ngrxLet;return e.oxw().submit(i)}),e._UZ(1,"button",16),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.form.invalid)}}function ke(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"p-dialog",1),e.NdJ("visibleChange",function(){return e.CHM(o),e.oxw().close()}),e.TgZ(1,"form",2)(2,"span",3),e._UZ(3,"input",4),e.TgZ(4,"label",5),e.SDv(5,6),e.qZA(),e.YNc(6,He,3,0,"div",7),e.qZA(),e.TgZ(7,"span",3),e._UZ(8,"input",8),e.TgZ(9,"label",5),e.SDv(10,9),e.qZA(),e.YNc(11,ze,3,0,"div",7),e.qZA()(),e.YNc(12,je,2,2,"ng-template",10),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("resizable",!1)("maximizable",!0)("visible",o.visible)("modal",!0)("closeOnEscape",!0),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(2),e.ekj("ng-invalid",(null==o.form.errors?null:o.form.errors[o.abstractLogIsUniqueError])||!o.form.get("title").valid)("ng-valid",!(null!=o.form.errors&&o.form.errors[o.abstractLogIsUniqueError])&&o.form.get("title").valid),e.xp6(3),e.Q6J("ngIf",null==o.form.errors?null:o.form.errors[o.abstractLogIsUniqueError]),e.xp6(2),e.ekj("ng-invalid",(null==o.form.errors?null:o.form.errors[o.abstractLogIsUniqueError])||!o.form.get("desc").valid)("ng-valid",!(null!=o.form.errors&&o.form.errors[o.abstractLogIsUniqueError])&&o.form.get("desc").valid),e.xp6(3),e.Q6J("ngIf",null==o.form.errors?null:o.form.errors[o.abstractLogIsUniqueError])}}let Fe=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.abstractLogIsUniqueError=w.zO,this.form=this.fb.group({title:[null,p.kI.required],desc:null},{asyncValidators:w.mX.abstractLogIsUnique(this.store.pipe((0,s.Ys)(J.Vc)),this.store.pipe((0,s.Ys)(Z)))}),this.log$=this.store.pipe((0,s.Ys)(Z),(0,R.h)(i=>!!i),(0,Oe.b)(i=>{this.form.patchValue({title:i.title,desc:i.desc})}))}close(){super.close(),this.log$.pipe((0,ue.q)(1)).subscribe()}submit(o){this.store.dispatch(V({log:Object.assign(Object.assign({},o),this.form.value)})),this.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-update-log-dialog"]],features:[e.qOj],decls:1,vars:1,consts:function(){let n,o,_,i,l,r;return n=$localize`:Dialog headline@@UpdateLogDialogComponent\:header:Update Template`,o=$localize`:Title input label@@UpdateLogDialogComponent\:titleLabel:Title`,_=$localize`:Description input label@@UpdateLogDialogComponent\:descriptionLabel:Description`,i=$localize`:Title error hint@@UpdateLogDialogComponent\:titleError:A template with this name already exists. Please choose another name.`,l=$localize`:Description error hint@@UpdateLogDialogComponent\:descriptionError:A template with this description already exists. Please choose another description.`,r=$localize`:Update button@@UpdateLogDialogComponent\:updateButton:Update`,[["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange",4,"ngrxLet"],["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],[3,"formGroup"],[1,"p-float-label","mt-5","field"],["formControlName","title","pInputText","","type","text",1,"inputfield","w-full"],["for","float-input"],o,["class","w-full mt-1 px-2",4,"ngIf"],["formControlName","desc","pInputText","","type","text",1,"inputfield","w-full"],_,["pTemplate","footer"],[1,"w-full","mt-1","px-2"],[1,"p-error","text-xs"],i,l,[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-check","label",r,1,"p-button-success","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&e.YNc(0,ke,13,16,"p-dialog",0),2&o&&e.Q6J("ngrxLet",_.log$)},directives:[I.eJ,N.V,p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,U.o,d.O5,L.jx,S.Hq,f.H],styles:[""]}),t})();function Ve(t,n){if(1&t&&(e.TgZ(0,"form",7),e._UZ(1,"br")(2,"hr"),e.TgZ(3,"p",3)(4,"span"),e.SDv(5,8),e.qZA(),e.TgZ(6,"span"),e._uU(7,"\xa0("),e.qZA(),e.TgZ(8,"span",9),e._uU(9),e.qZA(),e.TgZ(10,"span"),e._uU(11,")\xa0"),e.qZA(),e.TgZ(12,"span"),e.SDv(13,10),e.qZA()(),e.TgZ(14,"span",11),e._UZ(15,"input",12),e.TgZ(16,"label",13),e.SDv(17,14),e.qZA()()()),2&t){const o=e.oxw().ngIf,_=e.oxw();e.Q6J("formGroup",_.form),e.xp6(9),e.Oqu(o.title)}}function Ke(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw().ngIf;return e.oxw().delete(i)}),e._UZ(1,"button",16),e.qZA()}if(2&t){const o=e.oxw().ngIf,_=e.oxw();e.Q6J("formGroup",_.form),e.xp6(1),e.Q6J("disabled",_.form.invalid&&!!o.recordsCount)}}function We(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"p-dialog",1),e.NdJ("visibleChange",function(){return e.CHM(o),e.oxw().close()}),e.ynx(1),e.SDv(2,2),e.BQk(),e.TgZ(3,"p",3),e.SDv(4,4),e.qZA(),e.YNc(5,Ve,18,2,"form",5),e.YNc(6,Ke,2,2,"ng-template",6),e.qZA()}if(2&t){const o=n.ngIf,_=e.oxw();e.Q6J("resizable",!1)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(5),e.Q6J("ngIf",!!o.recordsCount)}}let eo=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.log$=this.store.pipe((0,s.Ys)(Z),(0,R.h)(i=>!!i)),this.form=this.fb.group({title:[null,null,w.mX.isEqualString(this.log$.pipe((0,u.U)(i=>i.title)))]})}close(){super.close(),this.form.reset()}delete(o){this.store.dispatch(K({log:o})),this.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-delete-log-dialog"]],features:[e.qOj],decls:2,vars:3,consts:function(){let n,o,_,i,l,r,a;return n=$localize`:Dialog headline@@DeleteLogDialogComponent\:header:Delete Log`,o=$localize`:Dialog question@@DeleteLogDialogComponent\:question: Are you sure you want to delete this log? `,_=$localize`:Warning about deletion@@DeleteLogDialogComponent\:warning: If you decide to do this all records of this log will also be unrecoverably deleted. `,i=$localize`:Hint 1/2@@DeleteLogDialogComponent\:hint1:Please enter the title`,l=$localize`:Hint 2/2@@DeleteLogDialogComponent\:hint2:of the log you want to delete to confirm the deletion.`,r=$localize`:Hint input label@@DeleteLogDialogComponent\:hintLabel:Delete command`,a=$localize`:Delete button@@DeleteLogDialogComponent\:deleteButton:Delete`,[["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange",4,"ngIf"],["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],o,[1,"mb-0","font-light"],_,[3,"formGroup",4,"ngIf"],["pTemplate","footer"],[3,"formGroup"],i,[1,"p-error"],l,[1,"p-float-label","mt-5","field"],["formControlName","title","pInputText","","type","text",1,"inputfield","w-full"],["for","float-input"],r,[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-trash","label",a,1,"p-button-danger","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&(e.YNc(0,We,7,6,"p-dialog",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,_.log$))},directives:[d.O5,N.V,p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,U.o,L.jx,S.Hq,f.H],pipes:[d.Ov],styles:[""]}),t})();function oo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",13),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw().ngIf;return e.oxw().delete(i.id)}),e._UZ(1,"button",14),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.form.invalid)}}function to(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"p-dialog",1),e.NdJ("visibleChange",function(){return e.CHM(o),e.oxw().close()}),e.ynx(1),e.SDv(2,2),e.BQk(),e.TgZ(3,"form",3),e._UZ(4,"br")(5,"hr"),e.TgZ(6,"p",4)(7,"span"),e.SDv(8,5),e.qZA(),e.TgZ(9,"span"),e._uU(10,"\xa0("),e.qZA(),e.TgZ(11,"span",6),e._uU(12),e.qZA(),e.TgZ(13,"span"),e._uU(14,")\xa0"),e.qZA(),e.TgZ(15,"span"),e.SDv(16,7),e.qZA()(),e.TgZ(17,"span",8),e._UZ(18,"input",9),e.TgZ(19,"label",10),e.SDv(20,11),e.qZA()()(),e.YNc(21,oo,2,2,"ng-template",12),e.qZA()}if(2&t){const o=n.ngIf,_=e.oxw();e.Q6J("resizable",!1)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(3),e.Q6J("formGroup",_.form),e.xp6(9),e.Oqu(o.title)}}let _o=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.log$=this.store.pipe((0,s.Ys)(Z),(0,R.h)(i=>!!i)),this.form=this.fb.group({title:[null,null,w.mX.isEqualString(this.log$.pipe((0,u.U)(i=>i.title)))]})}close(){super.close(),this.form.reset()}delete(o){this.store.dispatch((0,C.kl)({logId:o})),this.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-delete-records-dialog"]],features:[e.qOj],decls:2,vars:3,consts:function(){let n,o,_,i,l,r;return n=$localize`:Dialog headline@@DeleteRecordsDialogComponent\:header:Clear Records`,o=$localize`:Dialog question@@DeleteRecordsDialogComponent\:question: Are you sure you want to delete all event records of this log? `,_=$localize`:Hint 1/2@@DeleteRecordsDialogComponent\:hint1:Please enter the title`,i=$localize`:Hint 2/2@@DeleteRecordsDialogComponent\:hint2:of the log to confirm the deletion of all records.`,l=$localize`:Hint input label@@DeleteRecordsDialogComponent\:hintLabel:Delete command`,r=$localize`:Delete button@@DeleteRecordsDialogComponent\:deleteButton:Delete`,[["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange",4,"ngIf"],["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],o,[3,"formGroup"],[1,"mb-0","font-light"],_,[1,"p-error"],i,[1,"p-float-label","mt-5","field"],["formControlName","title","pInputText","","type","text",1,"inputfield","w-full"],["for","float-input"],l,["pTemplate","footer"],[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-trash","label",r,1,"p-button-danger","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&(e.YNc(0,to,22,7,"p-dialog",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,_.log$))},directives:[d.O5,N.V,p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,U.o,L.jx,S.Hq,f.H],pipes:[d.Ov],styles:[""]}),t})();function no(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"span",25),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw(5).ngrxLet;e.xp6(2),e.hij("\xa0(",o.desc,")")}}function io(t,n){if(1&t&&(e.TgZ(0,"div",22)(1,"span",23),e._uU(2),e.qZA(),e.YNc(3,no,3,1,"ng-container",24),e.qZA()),2&t){const o=e.oxw(4).ngrxLet;e.xp6(2),e.Oqu(o.title),e.xp6(1),e.Q6J("ngIf",!(null==o.desc||!o.desc.length))}}function lo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",10),e.YNc(1,io,4,2,"div",11),e.TgZ(2,"div",12)(3,"div",13)(4,"span",14),e.SDv(5,15),e.qZA(),e._UZ(6,"input",16),e.qZA(),e.TgZ(7,"div",17)(8,"span",14),e.SDv(9,18),e.qZA(),e._UZ(10,"input",16),e.qZA()(),e.TgZ(11,"div",19)(12,"button",20),e.NdJ("click",function(){return e.CHM(o),e.oxw(4).displayUpdateLogDialog=!0}),e.qZA(),e.TgZ(13,"button",21),e.NdJ("click",function(){return e.CHM(o),e.oxw(4).displayDeleteLogDialog=!0}),e.qZA()()()}if(2&t){const o=e.oxw().ngrxLet,_=e.oxw(2).ngrxLet;e.xp6(1),e.Q6J("ngIf",_),e.xp6(5),e.Q6J("disabled",!0)("value",o.title),e.xp6(4),e.Q6J("disabled",!0)("value",o.desc||"no description set")}}const me=function(){return["record"]};function ao(t,n){if(1&t&&e._UZ(0,"button",31),2&t){const o=e.oxw(5);e.Q6J("icon",o.PrimeIcons.PLAY)("routerLink",e.DdM(2,me))}}function so(t,n){if(1&t&&e._UZ(0,"button",32),2&t){const o=e.oxw(5);e.Q6J("icon",o.PrimeIcons.FORWARD)("routerLink",e.DdM(2,me))}}function ro(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(2).ngrxLet,l=e.oxw().ngrxLet;return e.oxw(2).shareRecords(l,i)}),e.ALo(1,"async"),e.qZA()}if(2&t){const o=e.oxw(5);e.Q6J("disabled",e.lcZ(1,1,o.downloading$))}}function co(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(o),e.oxw(5).displayDeleteRecordsDialog=!0}),e.qZA()}}function po(t,n){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,ao,1,3,"button",27),e.YNc(2,so,1,3,"button",28),e.YNc(3,ro,2,3,"button",29),e.YNc(4,co,1,0,"button",30),e.qZA()),2&t){const o=e.oxw(2).ngrxLet;e.xp6(1),e.Q6J("ngIf",!(null!=o&&o.length)),e.xp6(1),e.Q6J("ngIf",!(null==o||!o.length)),e.xp6(1),e.Q6J("ngIf",!(null==o||!o.length)),e.xp6(1),e.Q6J("ngIf",!(null==o||!o.length))}}function go(t,n){1&t&&(e.TgZ(0,"span",35),e.SDv(1,36),e.qZA())}function Eo(t,n){if(1&t&&(e.TgZ(0,"p-panel",6),e.YNc(1,lo,14,5,"ng-template",7),e.YNc(2,po,5,4,"div",8),e.YNc(3,go,2,0,"span",9),e.qZA()),2&t){const o=e.oxw(2).ngrxLet;e.xp6(2),e.Q6J("ngIf",o),e.xp6(1),e.Q6J("ngIf",!o)}}function Oo(t,n){if(1&t&&(e.TgZ(0,"p-panel",37),e._UZ(1,"el-records",38),e.qZA()),2&t){const o=e.oxw().ngrxLet,_=e.oxw().ngrxLet;e.xp6(1),e.Q6J("records",o)("template",_)("showDataColumn",!0)}}function uo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Eo,4,2,"p-panel",4),e.YNc(2,Oo,2,3,"p-panel",5),e.BQk()),2&t){const o=e.oxw().ngrxLet,_=e.oxw();e.xp6(1),e.Q6J("ngrxLet",_.log$),e.xp6(1),e.Q6J("ngIf",o)}}function mo(t,n){if(1&t&&(e.TgZ(0,"div",2),e.YNc(1,uo,3,2,"ng-container",3),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngrxLet",o.records$)}}let Lo=(()=>{class t{constructor(o){this.store=o,this.PrimeIcons=L.dv,this.displayUpdateLogDialog=!1,this.displayDeleteLogDialog=!1,this.displayDeleteRecordsDialog=!1,this.logData=(0,ne.a)([this.store.pipe((0,s.Ys)(Z),(0,R.h)(_=>!!_)),this.store.pipe((0,s.Ys)(q.zU),(0,R.h)(_=>!!_)),this.store.pipe((0,s.Ys)(W.Hm),(0,R.h)(_=>!!_))]).pipe((0,R.h)(_=>{var i,l;return(null===(i=null==_?void 0:_[0])||void 0===i?void 0:i.id)===(null==_?void 0:_[2])&&!!(null===(l=null==_?void 0:_[1])||void 0===l?void 0:l.length)})),this.log$=this.logData.pipe((0,u.U)(_=>_[0])),this.template$=this.logData.pipe((0,u.U)(_=>_[1].find(i=>i.id===_[0].templateId))),this.records$=this.log$.pipe((0,D.w)(_=>this.store.select((0,z.Tq)(_.id)))),this.downloading$=this.store.pipe((0,s.Ys)(ce.W))}ngOnInit(){this.store.dispatch((0,C.dY)({})),this.store.dispatch(X({}))}shareRecords(o,_){this.store.dispatch((0,re.z7)({records:o,log:_}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-log"]],decls:4,vars:4,consts:function(){let n,o,_,i,l,r,a,c;return n=$localize`:Table headline@@LogComponent\:tableHeadline:Event Records`,o=$localize`:Title@@LogComponent\:title:Title`,_=$localize`:Description@@LogComponent\:description:Description`,i=$localize`:Start logging button@@LogComponent\:startLoggingButton:Start logging`,l=$localize`:Resume logging button@@LogComponent\:resumeLoggingButton:Resume logging`,r=$localize`:Share records button@@LogComponent\:shareRecordsButton:Share records`,a=$localize`:Clear records button@@LogComponent\:clearRecordsButton:Clear records`,c=$localize`:Missing template error message@@LogComponent\:error: This log is based on an unknown template. Please import the corresponding template first. `,[["class","grid",4,"ngrxLet"],[3,"visible","visibleChange"],[1,"grid"],[4,"ngrxLet"],["class","col-12",4,"ngrxLet"],["class","col-12","header",n,4,"ngIf"],[1,"col-12"],["pTemplate","header"],["class","flex flex-wrap justify-content-center",4,"ngIf"],["class","p-error flex text-center justify-content-center font-light",4,"ngIf"],[1,"grid","m-0","w-full"],["class","col-12 p-panel-title el-unset-order  p-0 mb-4",4,"ngIf"],[1,"grid","col-12","sm:col","p-0","pb-1","m-0","sm:mr-3"],[1,"p-inputgroup","col-12","pt-0","pl-0","pr-0"],[1,"p-inputgroup-addon"],o,["type","text","pInputText","",3,"disabled","value"],[1,"p-inputgroup","col-12","pb-0","pl-0","pr-0"],_,[1,"col-12","sm:col-fixed","flex","sm:flex-column","flex-row","justify-content-center","sm:justify-content-between","p-0","mt-3","sm:mt-0"],["pButton","","pRipple","","icon","fas fa-edit","iconPos","right",1,"p-button-outlined","p-button-rounded","p-button-warning","mr-2","sm:mr-0",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","iconPos","right",1,"p-button-outlined","p-button-rounded","p-button-danger","sm:mb-1",3,"click"],[1,"col-12","p-panel-title","el-unset-order","p-0","mb-4"],[1,"text-overflow-anywhere"],[4,"ngIf"],[1,"text-overflow-anywhere","font-light","text-500"],[1,"flex","flex-wrap","justify-content-center"],["pButton","","pRipple","","class","p-button-outlined p-button-rounded p-button-success m-2 w-full md:w-13rem","iconPos","right","label",i,3,"icon","routerLink",4,"ngIf"],["pButton","","pRipple","","class","p-button-outlined p-button-rounded p-button-success m-2 w-full md:w-13rem","iconPos","right","label",l,3,"icon","routerLink",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-share-alt","class","p-button-outlined p-button-rounded p-button-info m-2 w-full md:w-13rem","iconPos","right","label",r,3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-outlined p-button-rounded p-button-danger m-2 w-full md:w-13rem","iconPos","right","label",a,3,"click",4,"ngIf"],["pButton","","pRipple","","iconPos","right","label",i,1,"p-button-outlined","p-button-rounded","p-button-success","m-2","w-full","md:w-13rem",3,"icon","routerLink"],["pButton","","pRipple","","iconPos","right","label",l,1,"p-button-outlined","p-button-rounded","p-button-success","m-2","w-full","md:w-13rem",3,"icon","routerLink"],["pButton","","pRipple","","icon","pi pi-share-alt","iconPos","right","label",r,1,"p-button-outlined","p-button-rounded","p-button-info","m-2","w-full","md:w-13rem",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-trash","iconPos","right","label",a,1,"p-button-outlined","p-button-rounded","p-button-danger","m-2","w-full","md:w-13rem",3,"click"],[1,"p-error","flex","text-center","justify-content-center","font-light"],c,["header",n,1,"col-12"],["breakpoint","767px","styleClass","p-datatable-striped",3,"records","template","showDataColumn"]]},template:function(o,_){1&o&&(e.YNc(0,mo,2,1,"div",0),e.TgZ(1,"el-update-log-dialog",1),e.NdJ("visibleChange",function(l){return _.displayUpdateLogDialog=l}),e.qZA(),e.TgZ(2,"el-delete-log-dialog",1),e.NdJ("visibleChange",function(l){return _.displayDeleteLogDialog=l}),e.qZA(),e.TgZ(3,"el-delete-records-dialog",1),e.NdJ("visibleChange",function(l){return _.displayDeleteRecordsDialog=l}),e.qZA()),2&o&&(e.Q6J("ngrxLet",_.template$),e.xp6(1),e.Q6J("visible",_.displayUpdateLogDialog),e.xp6(1),e.Q6J("visible",_.displayDeleteLogDialog),e.xp6(1),e.Q6J("visible",_.displayDeleteRecordsDialog))},directives:[I.eJ,ee.s,L.jx,d.O5,U.o,S.Hq,f.H,Q.rH,Ee,Fe,eo,_o],pipes:[d.Ov],styles:[""]}),t})();var h=g(4187),oe=g(4036);function Co(t,n){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij("(",o.desc,")")}}function Ro(t,n){if(1&t&&(e.TgZ(0,"div",13)(1,"span",14),e._uU(2),e.qZA(),e.YNc(3,Co,2,1,"span",15),e.qZA()),2&t){const o=n.$implicit;e.xp6(2),e.Oqu(o.title),e.xp6(1),e.Q6J("ngIf",!(null==o.desc||!o.desc.length))}}function To(t,n){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij("(",o.desc,")")}}function So(t,n){if(1&t&&(e.TgZ(0,"div",13)(1,"span",14),e._uU(2),e.qZA(),e.YNc(3,To,2,1,"span",15),e.qZA()),2&t){const o=n.$implicit;e.xp6(2),e.Oqu(o.title),e.xp6(1),e.Q6J("ngIf",!(null==o.desc||!o.desc.length))}}function fo(t,n){1&t&&(e.TgZ(0,"div",17)(1,"span",18),e.SDv(2,19),e.qZA()())}function Do(t,n){1&t&&(e.TgZ(0,"div",17)(1,"span",18),e.SDv(2,20),e.qZA()())}function ho(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().submit()}),e._UZ(1,"button",22),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.form.invalid)}}let Go=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.abstractLogIsUniqueError=w.zO,this.templates$=this.store.pipe((0,s.Ys)(q.zU)),this.form=this.fb.group({title:[null,p.kI.required],desc:null,templateId:[null,p.kI.required]},{asyncValidators:w.mX.abstractLogIsUnique(this.store.pipe((0,s.Ys)(J.Vc)))})}close(){super.close(),this.form.reset()}submit(){this.store.dispatch(k(this.form.value)),this.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-create-log-dialog"]],features:[e.qOj],decls:17,vars:19,consts:function(){let n,o,_,i,l,r,a;return n=$localize`:Dialog headline@@CreateLogDialogComponent\:header:Add new Log`,o=$localize`:Dropdown placeholder no items@@CreateLogDialogComponent\:dropdownPlaceholder:Please Choose a template ...`,_=$localize`:Title input label@@CreateLogDialogComponent\:titleLabel:Title`,i=$localize`:Description input label@@CreateLogDialogComponent\:descriptionLabel:Description`,l=$localize`:Title error hint@@CreateLogDialogComponent\:titleError:A log with this name already exists. Please choose another name.`,r=$localize`:Description error hint@@CreateLogDialogComponent\:descriptionError:A log with this description already exists. Please choose another description.`,a=$localize`:Add button@@CreateLogDialogComponent\:addButton:Add`,[["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],[3,"formGroup"],["optionLabel","title","optionValue","id","formControlName","templateId","styleClass","w-full white-space-normal","panelStyleClass","white-space-normal","placeholder",o,3,"options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"p-float-label","mt-5","field"],["formControlName","title","pInputText","","type","text",1,"inputfield","w-full"],["for","float-input"],_,["class","w-full mt-1 px-2",4,"ngIf"],["formControlName","desc","pInputText","","type","text",1,"inputfield","w-full"],i,["pTemplate","footer"],[1,"flex","flex-wrap","align-items-center"],[1,"text-overflow-anywhere"],["class","pl-2 text-overflow-anywhere font-light text-500",4,"ngIf"],[1,"pl-2","text-overflow-anywhere","font-light","text-500"],[1,"w-full","mt-1","px-2"],[1,"p-error","text-xs"],l,r,[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-plus","label",a,1,"p-button-success","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(){return _.close()}),e.TgZ(1,"form",1)(2,"p-dropdown",2),e.ALo(3,"async"),e.YNc(4,Ro,4,2,"ng-template",3),e.YNc(5,So,4,2,"ng-template",4),e.qZA(),e.TgZ(6,"span",5),e._UZ(7,"input",6),e.TgZ(8,"label",7),e.SDv(9,8),e.qZA(),e.YNc(10,fo,3,0,"div",9),e.qZA(),e.TgZ(11,"span",5),e._UZ(12,"input",10),e.TgZ(13,"label",7),e.SDv(14,11),e.qZA(),e.YNc(15,Do,3,0,"div",9),e.qZA()(),e.YNc(16,ho,2,2,"ng-template",12),e.qZA()),2&o&&(e.Q6J("resizable",!1)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(1),e.Q6J("formGroup",_.form),e.xp6(1),e.Q6J("options",e.lcZ(3,17,_.templates$)),e.xp6(5),e.ekj("ng-invalid",(null==_.form.errors?null:_.form.errors[_.abstractLogIsUniqueError])||!_.form.get("title").valid)("ng-valid",!(null!=_.form.errors&&_.form.errors[_.abstractLogIsUniqueError])&&_.form.get("title").valid),e.xp6(3),e.Q6J("ngIf",null==_.form.errors?null:_.form.errors[_.abstractLogIsUniqueError]),e.xp6(2),e.ekj("ng-invalid",(null==_.form.errors?null:_.form.errors[_.abstractLogIsUniqueError])||!_.form.get("desc").valid)("ng-valid",!(null!=_.form.errors&&_.form.errors[_.abstractLogIsUniqueError])&&_.form.get("desc").valid),e.xp6(3),e.Q6J("ngIf",null==_.form.errors?null:_.form.errors[_.abstractLogIsUniqueError]))},directives:[N.V,p._Y,p.JL,p.sg,oe.Lt,p.JJ,p.u,L.jx,d.O5,p.Fj,U.o,S.Hq,f.H],pipes:[d.Ov],styles:[""]}),t})();function Ao(t,n){if(1&t&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Tol(o.class),e.xp6(1),e.Oqu(o.header)}}function vo(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"th",8),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.YNc(3,Ao,2,3,"th",9),e.qZA()),2&t){const o=n.$implicit;e.xp6(3),e.Q6J("ngForOf",o)}}function xo(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"span",19),e._uU(2),e.qZA(),e.BQk()),2&t){const o=n.ngIf;e.xp6(2),e.hij("(",o,")")}}function No(t,n){if(1&t&&(e.TgZ(0,"tr",10)(1,"td"),e._UZ(2,"p-tableCheckbox",11),e.qZA(),e.TgZ(3,"td",12)(4,"span",13),e._uU(5),e.qZA(),e.TgZ(6,"span",14),e._uU(7),e.qZA()(),e.TgZ(8,"td",12)(9,"span",13),e._uU(10),e.qZA(),e.TgZ(11,"span",14),e._uU(12),e.qZA()(),e.TgZ(13,"td",12)(14,"span",13),e._uU(15),e.qZA(),e.TgZ(16,"span",15)(17,"span",16),e._uU(18),e.ALo(19,"templateTitle"),e.qZA(),e.YNc(20,xo,3,1,"ng-container",17),e.ALo(21,"templateDesc"),e.qZA()(),e.TgZ(22,"td",18)(23,"span",13),e._uU(24),e.qZA(),e.TgZ(25,"span",14),e._uU(26),e.qZA()()()),2&t){const o=n.$implicit,_=e.oxw().ngrxLet,i=e.oxw();e.Q6J("pSelectableRow",o),e.xp6(2),e.Q6J("pSelectableRow",o)("value",o),e.xp6(3),e.Oqu(i.cols[0].header),e.xp6(2),e.Oqu(o.title),e.xp6(3),e.Oqu(i.cols[1].header),e.xp6(2),e.Oqu(o.desc),e.xp6(3),e.Oqu(i.cols[2].header),e.xp6(3),e.hij(" ",e.xi3(19,12,o.templateId,_)," "),e.xp6(2),e.Q6J("ngIf",e.xi3(21,15,o.templateId,_)),e.xp6(4),e.Oqu(i.cols[3].header),e.xp6(2),e.Oqu(o.recordsCount)}}function bo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",20),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw().ngrxLet;return e.oxw().submit(i)}),e._UZ(1,"button",21),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.form.invalid)}}function Mo(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-table",4),e.NdJ("selectionChange",function(i){return e.CHM(o),e.oxw().form.patchValue({logs:i})}),e.ALo(2,"async"),e.YNc(3,vo,4,1,"ng-template",5),e.YNc(4,No,27,18,"ng-template",6),e.qZA(),e.YNc(5,bo,2,2,"ng-template",7),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("selection",o.form.value.logs)("rowHover",!0)("columns",o.cols)("value",e.lcZ(2,4,o.logs$))}}let Po=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.logs$=this.store.pipe((0,s.Ys)(J.Vc),(0,u.U)(i=>[...i])),this.templates$=this.store.pipe((0,s.Ys)(q.zU)),this.cols=[h.SJ,h.IB,h.KG,h.LR],this.form=this.fb.group({logs:[[],p.kI.required]})}submit(o){this.store.dispatch((0,re.CM)({logs:this.form.value.logs,templates:o})),this.close()}close(){super.close(),this.form.patchValue({logs:[]})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-share-logs-dialog"]],features:[e.qOj],decls:4,vars:6,consts:function(){let n,o,_;return n=$localize`:Dialog headline@@ShareLogsDialogComponent\:header:Share Logs`,o=$localize`:Dialog description@@ShareLogsDialogComponent\:description: Please select all logs, you want to export in an overview. If recordings are also available for individual logs all download files will be provided in a common ZIP file. `,_=$localize`:Share button@@ShareLogsDialogComponent\:shareButton:Share`,[["header",n,3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],[1,"flex","text-center","font-light"],o,[4,"ngrxLet"],["styleClass","p-datatable-striped mt-3","breakpoint","730px","selectionMode","multiple",3,"selection","rowHover","columns","value","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"w-3rem"],[3,"class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],[3,"pSelectableRow","value"],[1,"justify-content-between"],[1,"p-column-title","font-light"],[1,"text-right"],[1,"flex-wrap","text-right"],[1,"text-overflow-anywhere"],[4,"ngIf"],[1,"justify-content-between","text-center"],[1,"text-overflow-anywhere","font-light","text-500"],[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-share-alt","label",_,1,"p-button-info","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(){return _.close()}),e.TgZ(1,"span",1),e.SDv(2,2),e.qZA(),e.YNc(3,Mo,6,6,"ng-container",3),e.qZA()),2&o&&(e.Q6J("resizable",!0)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(3),e.Q6J("ngrxLet",_.templates$))},directives:[N.V,I.eJ,v.iA,L.jx,v.Mo,d.sg,v.Ei,v.UA,d.O5,p._Y,p.JL,p.sg,S.Hq,f.H],pipes:[d.Ov,y.i9,y.BU],styles:[""]}),t})();function Io(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(o),e.oxw(3).displayShareLogsDialog=!0}),e.ALo(1,"async"),e.qZA()}if(2&t){const o=e.oxw(3);e.Q6J("disabled",e.lcZ(1,1,o.downloading$))}}function Uo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",9)(1,"div",10),e._UZ(2,"i",11),e.TgZ(3,"input",12),e.NdJ("input",function(i){return e.CHM(o),e.oxw(),e.MAs(2).filterGlobal(i.target.value,"contains")}),e.qZA()(),e.TgZ(4,"div",13),e.YNc(5,Io,2,3,"button",14),e.TgZ(6,"button",15),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).displayCreateLogDialog=!0}),e.qZA()()()}if(2&t){e.oxw();const o=e.MAs(2);e.xp6(5),e.Q6J("ngIf",!(null==o.value||!o.value.length))}}function yo(t,n){1&t&&e._UZ(0,"th",19)}function $o(t,n){if(1&t&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Tol(o.class),e.xp6(1),e.Oqu(o.header)}}function Zo(t,n){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,yo,1,0,"th",17),e.YNc(2,$o,2,3,"th",18),e.qZA()),2&t){const o=n.$implicit;e.oxw();const _=e.MAs(2);e.xp6(1),e.Q6J("ngIf",(null==_.value?null:_.value.length)>1),e.xp6(1),e.Q6J("ngForOf",o)}}function wo(t,n){if(1&t&&(e.TgZ(0,"td",30),e._UZ(1,"span",31),e.qZA()),2&t){const o=e.oxw().rowIndex;e.xp6(1),e.Q6J("pReorderableRowHandle",o)}}function Qo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"td",32)(1,"button",33),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().rowIndex;e.oxw();const l=e.MAs(2);return e.oxw().move(i,-1,l.value)}),e.qZA(),e.TgZ(2,"button",34),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().rowIndex;e.oxw();const l=e.MAs(2);return e.oxw().move(i,1,l.value)}),e.qZA()()}if(2&t){const o=e.oxw().rowIndex;e.oxw();const _=e.MAs(2);e.xp6(1),e.Q6J("disabled",0===o),e.xp6(1),e.Q6J("disabled",o===_.value.length-1)}}function qo(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"span",35),e._uU(2),e.qZA(),e.BQk()),2&t){const o=n.ngIf;e.xp6(2),e.hij("(",o,")")}}const H=function(t){return[t]},Bo=function(t){return{"p-error":t}};function Jo(t,n){if(1&t&&(e.TgZ(0,"tr",20),e.YNc(1,wo,2,1,"td",21),e.YNc(2,Qo,3,2,"td",22),e.TgZ(3,"td",23)(4,"span",24),e._uU(5),e.qZA(),e.TgZ(6,"span",25),e._uU(7),e.qZA()(),e.TgZ(8,"td",23)(9,"span",24),e._uU(10),e.qZA(),e.TgZ(11,"span",25),e._uU(12),e.qZA()(),e.TgZ(13,"td",23)(14,"span",24),e._uU(15),e.qZA(),e.TgZ(16,"span",26)(17,"span",27),e.ALo(18,"templateExists"),e._uU(19),e.ALo(20,"templateTitle"),e.qZA(),e.YNc(21,qo,3,1,"ng-container",28),e.ALo(22,"templateDesc"),e.qZA()(),e.TgZ(23,"td",29)(24,"span",24),e._uU(25),e.qZA(),e.TgZ(26,"span",25),e._uU(27),e.qZA()()()),2&t){const o=n.$implicit,_=n.rowIndex,i=e.oxw().ngrxLet,l=e.MAs(2),r=e.oxw();e.Q6J("pReorderableRow",_),e.xp6(1),e.Q6J("ngIf",(null==l.value?null:l.value.length)>1),e.xp6(1),e.Q6J("ngIf",(null==l.value?null:l.value.length)>1),e.xp6(1),e.Q6J("routerLink",e.VKq(26,H,o.id)),e.xp6(2),e.Oqu(r.cols[0].header),e.xp6(2),e.Oqu(o.title),e.xp6(1),e.Q6J("routerLink",e.VKq(28,H,o.id)),e.xp6(2),e.Oqu(r.cols[1].header),e.xp6(2),e.Oqu(o.desc),e.xp6(1),e.Q6J("routerLink",e.VKq(30,H,o.id)),e.xp6(2),e.Oqu(r.cols[2].header),e.xp6(2),e.Q6J("ngClass",e.VKq(32,Bo,!e.xi3(18,17,o.templateId,i))),e.xp6(2),e.hij(" ",e.xi3(20,20,o.templateId,i)," "),e.xp6(2),e.Q6J("ngIf",e.xi3(22,23,o.templateId,i)),e.xp6(2),e.Q6J("routerLink",e.VKq(34,H,o.id)),e.xp6(2),e.Oqu(r.cols[3].header),e.xp6(2),e.Oqu(o.recordsCount)}}function Xo(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td",36),e.SDv(2,37),e.qZA()()),2&t){const o=e.oxw(2);e.xp6(1),e.uIk("colspan",o.cols.length+1)}}function Yo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"p-panel",2)(1,"p-table",3,4),e.NdJ("onRowReorder",function(){e.CHM(o);const i=e.MAs(2);return e.oxw().onRowReorder(i.value)}),e.ALo(3,"async"),e.ALo(4,"async"),e.YNc(5,Uo,7,1,"ng-template",5),e.YNc(6,Zo,3,2,"ng-template",6),e.YNc(7,Jo,28,36,"ng-template",7),e.YNc(8,Xo,3,1,"ng-template",8),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("rowHover",!0)("reorderableColumns",!0)("columns",o.cols)("value",e.lcZ(3,5,o.logs$))("loading",e.lcZ(4,7,o.logsLoading$))}}let Ho=(()=>{class t{constructor(o){this.store=o,this.searchTerm="",this.displayCreateLogDialog=!1,this.displayShareLogsDialog=!1,this.logs$=this.store.pipe((0,s.Ys)(J.Vc),(0,u.U)(_=>[..._])),this.logsLoading$=this.store.pipe((0,s.Ys)(J.aC)),this.templates$=this.store.pipe((0,s.Ys)(q.zU)),this.downloading$=this.store.pipe((0,s.Ys)(ce.W)),this.cols=[h.SJ,h.IB,h.KG,h.LR]}onRowReorder(o){this.store.dispatch((0,P.zE)({logs:o}))}move(o,_,i){if(o+_>=0&&o+_<(null==i?void 0:i.length)){const l=i[o],r=[...i];r.splice(o,1),r.splice(o+_,0,l),this.onRowReorder(r)}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-logs"]],decls:3,vars:3,consts:function(){let n,o,_;return n=$localize`:Page headline@@LogsComponent\:header:Logs`,o=$localize`:Search placeholder@@LogsComponent\:seachPlaceholder:Search keyword`,_=$localize`:Empty table message@@LogsComponent\:empty: No Logs found. `,[["header",n,4,"ngrxLet"],[3,"visible","visibleChange"],["header",n],["styleClass","p-datatable-striped","dataKey","id","breakpoint","685px",3,"rowHover","reorderableColumns","columns","value","loading","onRowReorder"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","flex-wrap","table-header","sm:justify-content-between","justify-content-around"],[1,"p-inputgroup","max-w-full","sm:w-auto","m-1"],[1,"p-inputgroup-addon","pi","pi-search"],["pInputText","","type","text","placeholder",o,3,"input"],[1,"flex","flex-wrap"],["pButton","","pRipple","","type","button","icon","pi pi-share-alt","class","p-button-outlined p-button-rounded p-button-info m-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-outlined","p-button-rounded","p-button-success","m-1",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-share-alt",1,"p-button-outlined","p-button-rounded","p-button-info","m-1",3,"disabled","click"],["class","w-3rem",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"w-3rem"],["draggable","true",1,"cursor-pointer",3,"pReorderableRow"],["class","cursor-move hide-on-smallscreen",4,"ngIf"],["class","flex flex-wrap justify-content-between hide-on-bigscreen",4,"ngIf"],[1,"justify-content-between",3,"routerLink"],[1,"p-column-title","font-light"],[1,"text-right"],[1,"flex-wrap","text-right"],[1,"text-overflow-anywhere",3,"ngClass"],[4,"ngIf"],[1,"justify-content-between","text-center",3,"routerLink"],[1,"cursor-move","hide-on-smallscreen"],["draggable","true",1,"pi","pi-bars",3,"pReorderableRowHandle"],[1,"flex","flex-wrap","justify-content-between","hide-on-bigscreen"],["pButton","","pRipple","","type","button","icon","pi pi-chevron-up",1,"p-button-secondary","p-button-rounded","mr-2",3,"disabled","click"],["pButton","","pRipple","","type","button","icon","pi pi-chevron-down",1,"p-button-secondary","p-button-rounded","mr-2",3,"disabled","click"],[1,"text-overflow-anywhere","font-light","text-500"],[1,"text-center"],_]},template:function(o,_){1&o&&(e.YNc(0,Yo,9,9,"p-panel",0),e.TgZ(1,"el-create-log-dialog",1),e.NdJ("visibleChange",function(l){return _.displayCreateLogDialog=l}),e.qZA(),e.TgZ(2,"el-share-logs-dialog",1),e.NdJ("visibleChange",function(l){return _.displayShareLogsDialog=l}),e.qZA()),2&o&&(e.Q6J("ngrxLet",_.templates$),e.xp6(1),e.Q6J("visible",_.displayCreateLogDialog),e.xp6(1),e.Q6J("visible",_.displayShareLogsDialog))},directives:[I.eJ,ee.s,v.iA,L.jx,U.o,d.O5,S.Hq,f.H,d.sg,v.qO,v.Mv,Q.rH,d.mk,Go,Po],pipes:[d.Ov,y.UV,y.i9,y.BU],styles:[""]}),t})();var zo=g(4986),jo=g(2805),m=g(9646),Fo=g(6425),Le=g(3787);function Vo(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().submit()}),e._UZ(1,"button",9),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.form.invalid)}}let Ko=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.form=this.fb.group({data:[null,p.kI.required]})}submit(){this.store.dispatch((0,C.ae)({eventTemplate:this.textEventTemplate,logId:this.logId,date:this.timestamp,data:this.form.value.data})),this.close()}close(){super.close(),this.form.reset()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-text-record-dialog"]],inputs:{textEventTemplate:"textEventTemplate",logId:"logId",timestamp:"timestamp"},features:[e.qOj],decls:9,vars:6,consts:function(){let n,o,_,i;return n=$localize`:Dialog headline@@TextRecordDialogComponent\:header:Text Event`,o=$localize`:Dialog description@@TextRecordDialogComponent\:description: Please enter a suitable text for the event. `,_=$localize`:Text input label@@TextRecordDialogComponent\:textLabel:Text`,i=$localize`:Create record button@@TextRecordDialogComponent\:createButton:Create Record`,[["header",n,"styleClass","w-full sm:w-30rem",3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],o,[3,"formGroup"],[1,"p-float-label","mt-5","field"],["formControlName","data","pInputText","","type","text",1,"inputfield","w-full"],["for","float-input"],_,["pTemplate","footer"],[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit","icon","pi pi-plus","label",i,1,"p-button-success","p-button-text",3,"disabled"]]},template:function(o,_){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(){return _.close()}),e.ynx(1),e.SDv(2,1),e.BQk(),e.TgZ(3,"form",2)(4,"span",3),e._UZ(5,"input",4),e.TgZ(6,"label",5),e.SDv(7,6),e.qZA()()(),e.YNc(8,Vo,2,2,"ng-template",7),e.qZA()),2&o&&(e.Q6J("resizable",!1)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(3),e.Q6J("formGroup",_.form))},directives:[N.V,p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,U.o,L.jx,S.Hq,f.H],styles:[""]}),t})();var te=g(5861),b=g(427),Wo=g(6128),Ce=g(6198);const et=["video"];function ot(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-dropdown",7),e.NdJ("onChange",function(i){return e.CHM(o),e.oxw().deviceChange(i)}),e.qZA(),e.TgZ(2,"div",8)(3,"div",9,10),e._UZ(5,"video",11,12),e.qZA(),e._UZ(7,"p-progressSpinner",13),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("options",o.availableDevices)}}function tt(t,n){1&t&&(e.TgZ(0,"span",14),e.SDv(1,15),e.qZA())}function _t(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",17),e.NdJ("ngSubmit",function(){const l=e.CHM(o).ngrxLet;return e.oxw(2).submit(l)}),e._UZ(1,"button",18),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("disabled",o.blockUI)("icon",o.blockUI?"pi pi-lock":"pi pi-camera")}}function nt(t,n){if(1&t&&e.YNc(0,_t,2,3,"form",16),2&t){const o=e.oxw();e.Q6J("ngrxLet",o.quality$)}}let it=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.quality$=this.store.pipe((0,s.Ys)(Wo.sX)),this.form=this.fb.group({deviceCurrent:null}),this.availableDevices=[],this.hasDevices=!1,this.blockUI=!1}ngOnInit(){this.selectedDevice=localStorage.getItem("eventCamera")||localStorage.getItem("qrCamera")||void 0}ngOnChanges(o){var _,i,l;const r=!!(null===(_=null==o?void 0:o.visible)||void 0===_?void 0:_.currentValue),a=!!(null===(i=null==o?void 0:o.visible)||void 0===i?void 0:i.previousValue);r&&!a?this.startCamera():!r&&a&&(null===(l=this.video)||void 0===l?void 0:l.nativeElement.srcObject)&&this.stopCamera()}startCamera(){var o=this;return(0,te.Z)(function*(){var _,i,l,r;try{if(!o.hasDevices){let a=yield navigator.mediaDevices.getUserMedia({video:!0});o.availableDevices=null===(_=yield navigator.mediaDevices.enumerateDevices())||void 0===_?void 0:_.filter(c=>"videoinput"===c.kind).map(c=>({deviceId:c.deviceId,groupId:c.groupId,kind:c.kind,label:c.label})),o.hasDevices=!!(null===(i=o.availableDevices)||void 0===i?void 0:i.length),a.getVideoTracks().forEach(c=>{try{c.stop()}catch(O){}}),a=null}if(o.hasDevices)try{o.stopCamera(),o.video.nativeElement.srcObject=yield navigator.mediaDevices.getUserMedia({video:{deviceId:o.selectedDevice,width:{min:640,ideal:9e3},height:{min:480,ideal:6e3}}}),o.selectedDevice=o.video.nativeElement.srcObject.getVideoTracks().find(a=>"video"===a.kind).getSettings().deviceId,(null===(l=o.form.value.deviceCurrent)||void 0===l?void 0:l.deviceId)!==o.selectedDevice&&o.form.patchValue({deviceCurrent:null===(r=o.availableDevices)||void 0===r?void 0:r.find(a=>a.deviceId===o.selectedDevice)})}catch(a){o.store.dispatch((0,b._N)({summary:$localize`:Camera error headline@@PhotoRecordDialogComponent\:cameraErrorHeadline:'Camera error`,detail:$localize`:Camera error details@@PhotoRecordDialogComponent\:cameraErrorDetails:Can not access camera.`}))}}catch(a){o.blockUI=!0,o.store.dispatch((0,b._N)(h.aW))}})()}deviceChange(o){var _;this.selectedDevice=(null===(_=null==o?void 0:o.value)||void 0===_?void 0:_.deviceId)||this.selectedDevice,localStorage.setItem("eventCamera",this.selectedDevice),this.startCamera()}submit(o){const _=this.video.nativeElement.srcObject.getVideoTracks().find(l=>"video"===l.kind).getSettings(),i=document.createElement("canvas");i.width=_.width,i.height=_.height,i.getContext("2d").drawImage(this.video.nativeElement,0,0,_.width,_.height),this.store.dispatch((0,C.ae)({eventTemplate:this.photoEventTemplate,logId:this.logId,date:new Date,data:i.toDataURL("image/jpeg",o/10)})),this.close()}stopCamera(){var o,_;(null===(o=this.video)||void 0===o?void 0:o.nativeElement)&&(null===(_=this.video.nativeElement.srcObject)||void 0===_||_.getVideoTracks().forEach(i=>{try{i.stop()}catch(l){}}),this.video.nativeElement.srcObject=null)}close(){this.stopCamera(),super.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-photo-record-dialog"]],viewQuery:function(o,_){if(1&o&&e.Gf(et,5),2&o){let i;e.iGM(i=e.CRH())&&(_.video=i.first)}},inputs:{photoEventTemplate:"photoEventTemplate",logId:"logId"},features:[e.qOj,e.TTD],decls:7,vars:8,consts:function(){let n,o,_;return n=$localize`:Dialog headline@@PhotoRecordDialogComponent\:header:Photo Event`,o=$localize`:Dropdown placeholder no items@@PhotoRecordDialogComponent\:dropdownPlaceholder:Loading cameras ...`,_=$localize`:No camera access@@PhotoRecordDialogComponent\:error: Could not access camera(s). `,[["header",n,3,"resizable","maximizable","visible","modal","closeOnEscape","onShow","visibleChange"],["cameraDialog",""],[3,"formGroup"],[1,"grid"],[4,"ngIf"],["class","col-12 text-center p-error",4,"ngIf"],["pTemplate","footer"],["formControlName","deviceCurrent","placeholder",o,1,"col-12",3,"options","onChange"],[1,"col-12","pb-0","relative"],["id","camera",1,"p-2","align-content-center","text-center"],["camera",""],["autoplay","","muted","","webkit-playsinline","","playsinline",""],["video",""],[1,"absolute","bottom-0","left-0","right-0","top-0","align-content-center"],[1,"col-12","text-center","p-error"],_,[3,"formGroup","ngSubmit",4,"ngrxLet"],[3,"formGroup","ngSubmit"],["pButton","","pRipple","","type","submit",1,"p-button-rounded","p-button-danger","m-1","w-5rem","h-5rem","text-4xl",3,"disabled","icon"]]},template:function(o,_){if(1&o){const i=e.EpF();e.TgZ(0,"p-dialog",0,1),e.NdJ("onShow",function(){e.CHM(i);const r=e.MAs(1);return _.showDialogMaximized(r,!0)})("visibleChange",function(){return _.close()}),e.TgZ(2,"form",2)(3,"div",3),e.YNc(4,ot,8,1,"ng-container",4),e.YNc(5,tt,2,0,"span",5),e.qZA()(),e.YNc(6,nt,1,1,"ng-template",6),e.qZA()}2&o&&(e.Q6J("resizable",!1)("maximizable",!_.isPWA())("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(2),e.Q6J("formGroup",_.form),e.xp6(2),e.Q6J("ngIf",!_.blockUI),e.xp6(1),e.Q6J("ngIf",_.blockUI))},directives:[N.V,p._Y,p.JL,p.sg,d.O5,oe.Lt,p.JJ,p.u,Ce.G,L.jx,I.eJ,S.Hq,f.H],styles:["[_nghost-%COMP%]     .p-dialog:not(.p-dialog-maximized) .p-dialog-content{max-width:100vh}[_nghost-%COMP%]     .p-dialog.p-dialog-maximized #camera{max-height:calc(100vh - 18.25rem)}[_nghost-%COMP%]     .p-dialog.p-dialog-maximized #camera video{max-height:calc(100vh - 19.25rem)}[_nghost-%COMP%]     .p-dropdown{width:100%}[_nghost-%COMP%]     p-progressspinner, [_nghost-%COMP%]     #camera{display:grid}[_nghost-%COMP%]     #camera{background-color:var(--surface-c);max-height:calc(100vh - 25.5rem);border-radius:6px;max-width:100%}[_nghost-%COMP%]     #camera video{border-radius:6px;z-index:2;width:100%;max-height:calc(100vh - 26.5rem)}[_nghost-%COMP%]     .p-dialog .p-dialog-footer form{text-align:center}[_nghost-%COMP%]     .p-dialog .p-dialog-footer button{width:3rem;height:3rem}[_nghost-%COMP%]     .p-dialog .p-dialog-footer button .p-button-icon.pi{font-size:unset}"]}),t})();const lt=["oscilloscope"],at=["oscilloscopeContainer"];function st(t,n){1&t&&e._UZ(0,"p-progressSpinner")}function rt(t,n){1&t&&(e.TgZ(0,"div",11,12),e._UZ(2,"canvas",13,14),e.qZA())}function ct(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-dropdown",6),e.NdJ("onChange",function(i){return e.CHM(o),e.oxw().deviceChange(i)}),e.qZA(),e.TgZ(2,"div",7),e.YNc(3,st,1,0,"p-progressSpinner",3),e.YNc(4,rt,4,0,"div",8),e.qZA(),e.TgZ(5,"span",9),e.SDv(6,10),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("options",o.availableDevices),e.xp6(2),e.Q6J("ngIf",!o.hasDevices),e.xp6(1),e.Q6J("ngIf",o.hasDevices)}}function pt(t,n){1&t&&(e.TgZ(0,"span",15),e.SDv(1,16),e.qZA())}function gt(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"button",17),e.NdJ("pointerdown",function(){return e.CHM(o),e.oxw().mediaRecorder.start()})("pointerup",function(){return e.CHM(o),e.oxw().mediaRecorder.stop()}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("disabled",o.blockUI)("icon",o.blockUI?"pi pi-lock":"fas fa-microphone")}}let dt=(()=>{class t extends x.M{constructor(o,_){super(),this.store=o,this.fb=_,this.form=this.fb.group({deviceCurrent:null}),this.availableDevices=[],this.hasDevices=!1,this.blockUI=!1,this.chunks=[]}ngOnInit(){this.selectedDevice=localStorage.getItem("eventMic")||void 0}ngOnChanges(o){var _,i;const l=!!(null===(_=null==o?void 0:o.visible)||void 0===_?void 0:_.currentValue),r=!!(null===(i=null==o?void 0:o.visible)||void 0===i?void 0:i.previousValue);l&&!r?this.startMic():!l&&r&&this.stream&&this.stopMic()}startMic(){var o=this;return(0,te.Z)(function*(){var _,i,l,r;try{if(o.hasDevices||(yield navigator.mediaDevices.getUserMedia({audio:!0}),o.availableDevices=null===(_=yield navigator.mediaDevices.enumerateDevices())||void 0===_?void 0:_.filter(a=>"audioinput"===a.kind).map(a=>({deviceId:a.deviceId,groupId:a.groupId,kind:a.kind,label:a.label})),o.hasDevices=!!(null===(i=o.availableDevices)||void 0===i?void 0:i.length)),o.hasDevices)try{!!o.stream&&o.stopMic(),o.stream=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:o.selectedDevice}}),o.mediaRecorder=new MediaRecorder(o.stream),o.visualize(),o.mediaRecorder.onstart=()=>o.timestamp=new Date,o.mediaRecorder.ondataavailable=a=>o.chunks.push(a.data),o.mediaRecorder.onstop=a=>o.recordComplete(a),o.selectedDevice=o.mediaRecorder.stream.getAudioTracks().find(a=>"audio"===a.kind).getSettings().deviceId,(null===(l=o.form.value.deviceCurrent)||void 0===l?void 0:l.deviceId)!==o.selectedDevice&&o.form.patchValue({deviceCurrent:null===(r=o.availableDevices)||void 0===r?void 0:r.find(a=>a.deviceId===o.selectedDevice)})}catch(a){o.store.dispatch((0,b._N)({summary:$localize`:Microphone error headline@@AudioRecordDialogComponent\:micErrorHeadline:Microphone error`,detail:$localize`:Microphone error details@@AudioRecordDialogComponent\:micErrorDetails:Can not access microphone.`}))}}catch(a){o.blockUI=!0,o.store.dispatch((0,b._N)(h.aW))}})()}recordComplete(o){var _=this;const i=new FileReader;i.onload=(0,te.Z)(function*(){_.store.dispatch((0,C.ae)({eventTemplate:_.audioEventTemplate,logId:_.logId,date:_.timestamp,data:i.result})),_.close()}),i.readAsDataURL(new Blob(this.chunks,{type:o.currentTarget.mimeType}))}deviceChange(o){var _;this.selectedDevice=(null===(_=null==o?void 0:o.value)||void 0===_?void 0:_.deviceId)||this.selectedDevice,localStorage.setItem("eventMic",this.selectedDevice),this.startMic()}stopMic(){var o,_;null===(o=this.sourceNode)||void 0===o||o.disconnect(),this.mediaRecorder=null,null===(_=this.stream)||void 0===_||_.getAudioTracks().forEach(i=>i.stop()),this.chunks=[],this.stream=null}visualize(){this.audioCtx||(this.audioCtx=new AudioContext),this.canvasCtx||(this.canvasCtx=this.canvas.nativeElement.getContext("2d"));const o=this.audioCtx.createAnalyser();o.fftSize=1024;const _=o.frequencyBinCount,i=new Uint8Array(_);this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.sourceNode.connect(o);const l=()=>{this.canvas.nativeElement.width=this.oscilloscopeContainer.nativeElement.offsetWidth-2,requestAnimationFrame(l),o.getByteTimeDomainData(i),this.canvasCtx.fillStyle="rgb(128, 0, 0)",this.canvasCtx.fillRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.canvasCtx.lineWidth=2,this.canvasCtx.strokeStyle="rgb(255, 0, 0)",this.canvasCtx.beginPath();const r=1*this.canvas.nativeElement.width/_;let a=0;for(let c=0;c<_;c++){const O=i[c]/128*this.canvas.nativeElement.height/2;0===c?this.canvasCtx.moveTo(a,O):this.canvasCtx.lineTo(a,O),a+=r}this.canvasCtx.lineTo(this.canvas.nativeElement.width,this.canvas.nativeElement.height/2),this.canvasCtx.stroke()};l()}close(){this.stopMic(),super.close()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-audio-record-dialog"]],viewQuery:function(o,_){if(1&o&&(e.Gf(lt,5),e.Gf(at,5)),2&o){let i;e.iGM(i=e.CRH())&&(_.canvas=i.first),e.iGM(i=e.CRH())&&(_.oscilloscopeContainer=i.first)}},inputs:{audioEventTemplate:"audioEventTemplate",logId:"logId"},features:[e.qOj,e.TTD],decls:6,vars:8,consts:function(){let n,o,_,i;return n=$localize`:Dialog headline@@AudioRecordDialogComponent\:header:Audio Event`,o=$localize`:Dropdown placeholder no items@@AudioRecordDialogComponent\:dropdownPlaceholder:Loading microphones ...`,_=$localize`:How to record hint@@AudioRecordDialogComponent\:hint: Please hold the microphone button to record your voice message. `,i=$localize`:No microphone access@@AudioRecordDialogComponent\:error: Could not access microphone(s). `,[["header",n,3,"resizable","maximizable","visible","modal","closeOnEscape","visibleChange"],[3,"formGroup"],[1,"grid"],[4,"ngIf"],["class","col-12 text-center p-error",4,"ngIf"],["pTemplate","footer"],["formControlName","deviceCurrent","placeholder",o,1,"col-12",3,"options","onChange"],[1,"col-12","text-center"],["class","el-oscilloscope-container",4,"ngIf"],["header","Audio Event",1,"col-12","text-center"],_,[1,"el-oscilloscope-container"],["oscilloscopeContainer",""],["height","80px"],["oscilloscope",""],[1,"col-12","text-center","p-error"],i,["pButton","","pRipple","",1,"p-button-rounded","p-button-danger","m-1","w-5rem","h-5rem","text-4xl",3,"disabled","icon","pointerdown","pointerup"]]},template:function(o,_){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(){return _.close()}),e.TgZ(1,"form",1)(2,"div",2),e.YNc(3,ct,7,3,"ng-container",3),e.YNc(4,pt,2,0,"span",4),e.qZA()(),e.YNc(5,gt,1,2,"ng-template",5),e.qZA()),2&o&&(e.Q6J("resizable",!1)("maximizable",!0)("visible",_.visible)("modal",!0)("closeOnEscape",!0),e.xp6(1),e.Q6J("formGroup",_.form),e.xp6(2),e.Q6J("ngIf",!_.blockUI),e.xp6(1),e.Q6J("ngIf",_.blockUI))},directives:[N.V,p._Y,p.JL,p.sg,d.O5,oe.Lt,p.JJ,p.u,Ce.G,L.jx,S.Hq,f.H],styles:["[_nghost-%COMP%]     .p-dialog:not(.p-dialog-maximized) .p-dialog-content{max-width:100vh}[_nghost-%COMP%]     .p-dialog.p-dialog-maximized .el-oscilloscope-container{max-width:calc(100vw - 2rem)}[_nghost-%COMP%]     .p-dropdown{width:100%}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{text-align:center}.el-oscilloscope-container[_ngcontent-%COMP%]{display:flex;max-width:calc(100vw - 3rem);border-radius:2px;padding:1px;background-color:var(--primary-color)}"]}),t})();function Et(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw(3).ngrxLet;e.xp6(2),e.hij("\xa0(",o.desc,")")}}function Ot(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw(2).ngIf;e.xp6(2),e.hij("\xa0(",o.desc,")")}}function ut(t,n){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&t){const o=n.ngIf;e.xp6(1),e.hij("",o,"d\xa0")}}function mt(t,n){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,ut,2,1,"span",15),e.ALo(2,"async"),e.TgZ(3,"span",16),e._uU(4),e.ALo(5,"date"),e.ALo(6,"async"),e.qZA()()),2&t){const o=e.oxw(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.relDays$)),e.xp6(3),e.Oqu(e.Dn7(5,4,e.lcZ(6,8,o.relTime$),"HH:mm:ss.SSS","UTC+0"))}}const Re=function(t){return{"font-light text-3xl":t}};function Lt(t,n){if(1&t&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&t){const o=e.oxw().ngIf,_=e.oxw().ngrxLet;e.Q6J("ngClass",e.VKq(2,Re,!_.containStart)),e.xp6(1),e.hij("",o.days,"d\xa0")}}function Ct(t,n){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,Lt,2,4,"span",18),e.TgZ(2,"span",19),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&t){const o=n.ngIf,_=e.oxw().ngrxLet;e.xp6(1),e.Q6J("ngIf",o.days),e.xp6(1),e.Q6J("ngClass",e.VKq(7,Re,!_.containStart)),e.xp6(1),e.Oqu(e.Dn7(4,3,o.time,"HH:mm:ss.SSS","UTC+0"))}}function Rt(t,n){if(1&t&&(e.ynx(0),e.YNc(1,mt,7,10,"div",12),e.YNc(2,Ct,5,9,"div",13),e.ALo(3,"async"),e.BQk()),2&t){const o=n.ngrxLet,_=e.oxw(4);e.xp6(1),e.Q6J("ngIf",o.containStart),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,2,_.timeDiff$))}}function Tt(t,n){if(1&t&&(e.TgZ(0,"div",7)(1,"div",8)(2,"span"),e._uU(3),e.qZA(),e.YNc(4,Et,3,1,"ng-container",1),e.qZA(),e.TgZ(5,"div",9)(6,"span",10),e._uU(7),e.ALo(8,"date"),e.ALo(9,"async"),e.qZA()(),e.TgZ(10,"div",11)(11,"span"),e._uU(12),e.qZA(),e.YNc(13,Ot,3,1,"ng-container",1),e.qZA(),e.YNc(14,Rt,4,4,"ng-container",0),e.ALo(15,"logEventTemplates"),e.qZA()),2&t){const o=e.oxw().ngIf,_=e.oxw().ngrxLet,i=e.oxw();e.xp6(3),e.Oqu(_.title),e.xp6(1),e.Q6J("ngIf",!(null==_.desc||!_.desc.length)),e.xp6(3),e.Oqu(e.xi3(8,6,e.lcZ(9,9,i.absTime$),"HH:mm:ss")),e.xp6(5),e.Oqu(o.title),e.xp6(1),e.Q6J("ngIf",!(null==o.desc||!o.desc.length)),e.xp6(1),e.Q6J("ngrxLet",e.lcZ(15,11,o))}}function St(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){const l=e.CHM(o).$implicit,r=e.oxw(3).ngrxLet;return e.oxw().raiseEvent(l,r.id)}),e.ALo(2,"colorClass"),e.ALo(3,"eventButtonDisabled"),e.qZA(),e.BQk()}if(2&t){const o=n.$implicit,_=e.oxw().ngrxLet,i=e.oxw(3);e.xp6(1),e.Gre("",e.lcZ(2,6,o.color)," p-button-rounded m-2 el-record-event-button"),e.Q6J("icon",o.icon.value!==i.PrimeIcons.CODE&&o.icon.value)("label",o.name)("disabled",e.xi3(3,8,o,_))}}function ft(t,n){1&t&&(e.TgZ(0,"span"),e.SDv(1,29),e.qZA())}function Dt(t,n){if(1&t&&(e.TgZ(0,"div",20)(1,"p-panel",21),e.YNc(2,St,4,11,"ng-container",22),e.YNc(3,ft,2,0,"span",1),e.qZA(),e.TgZ(4,"p-accordion",23)(5,"p-accordionTab",24),e._UZ(6,"el-records",25),e.qZA()(),e.TgZ(7,"p-panel",26),e._UZ(8,"el-records",27),e.qZA()()),2&t){const o=n.ngrxLet,_=e.oxw().ngIf;e.xp6(2),e.Q6J("ngForOf",_.eventTemplates),e.xp6(1),e.Q6J("ngIf",!(null!=_.eventTemplates&&_.eventTemplates.length)),e.xp6(2),e.Q6J("selected",!1),e.xp6(1),e.Q6J("records",o)("template",_)("showDataColumn",!1)("showRevokeButton",!0),e.xp6(2),e.Q6J("records",o)("template",_)("showDataColumn",!1)("showRevokeButton",!0)}}function ht(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"p-panel"),e.YNc(2,Tt,16,13,"ng-template",5),e.YNc(3,Dt,9,11,"div",6),e.qZA(),e.BQk()),2&t){const o=e.oxw(2);e.xp6(3),e.Q6J("ngrxLet",o.records$)}}function Gt(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.YNc(1,ht,4,1,"ng-container",1),e.ALo(2,"async"),e.TgZ(3,"el-text-record-dialog",2),e.NdJ("visibleChange",function(i){return e.CHM(o),e.oxw().displayTextRecordDialog=i}),e.qZA(),e.TgZ(4,"el-photo-record-dialog",3),e.NdJ("visibleChange",function(i){return e.CHM(o),e.oxw().displayPhotoRecordDialog=i}),e.qZA(),e.TgZ(5,"el-audio-record-dialog",4),e.NdJ("visibleChange",function(i){return e.CHM(o),e.oxw().displayAudioRecordDialog=i}),e.qZA(),e.BQk()}if(2&t){const o=n.ngrxLet,_=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,11,_.template$)),e.xp6(2),e.Q6J("visible",_.displayTextRecordDialog)("textEventTemplate",_.eventTemplate)("logId",o.id)("timestamp",_.timestamp),e.xp6(1),e.Q6J("visible",_.displayPhotoRecordDialog)("photoEventTemplate",_.eventTemplate)("logId",o.id),e.xp6(1),e.Q6J("visible",_.displayAudioRecordDialog)("audioEventTemplate",_.eventTemplate)("logId",o.id)}}const At=[{path:"",component:Ho},{path:":logId",children:[{path:"",component:Lo},{path:"record",component:(()=>{class t{constructor(o,_,i){this.store=o,this.audioService=_,this.currentEventRelTime=i,this.PrimeIcons=L.dv,this.refreshRate=1e3/60,this.displayTextRecordDialog=!1,this.displayPhotoRecordDialog=!1,this.displayAudioRecordDialog=!1,this.logData=(0,ne.a)([this.store.pipe((0,s.Ys)(Z),(0,R.h)(l=>!!l)),this.store.pipe((0,s.Ys)(q.zU),(0,R.h)(l=>!!l)),this.store.pipe((0,s.Ys)(W.Hm),(0,R.h)(l=>!!l))]).pipe((0,R.h)(l=>{var r,a;return(null===(r=null==l?void 0:l[0])||void 0===r?void 0:r.id)===(null==l?void 0:l[2])&&!!(null===(a=null==l?void 0:l[1])||void 0===a?void 0:a.length)})),this.interval$=function ko(t=0,n=zo.z){return t<0&&(t=0),(0,jo.H)(t,t,n)}(this.refreshRate),this.log$=this.logData.pipe((0,u.U)(l=>l[0])),this.template$=this.logData.pipe((0,u.U)(l=>l[1].find(r=>r.id===l[0].templateId))),this.records$=this.log$.pipe((0,D.w)(l=>this.store.select((0,z.Tq)(l.id)))),this.absTime$=this.interval$.pipe((0,u.U)(()=>new Date)),this.relTime$=this.records$.pipe((0,D.w)(l=>!l.find(r=>r.eventType===T.t.START)||l.find(r=>r.eventType===T.t.END||!!l.length&&l[l.length-1].eventType===T.t.PAUSE)?(0,m.of)(this.currentEventRelTime.transform(l)):this.interval$.pipe((0,u.U)(()=>this.currentEventRelTime.transform(l))))),this.relDays$=this.relTime$.pipe((0,R.h)(l=>!!l),(0,D.w)(l=>(0,m.of)(Math.trunc(+l/864e5)))),this.timeDiff$=this.records$.pipe((0,D.w)(l=>{if(!l.length||[T.t.PAUSE,T.t.END].includes(l[l.length-1].eventType))return(0,m.of)({days:0,time:new Date(0)});let r,a=0;if(l[l.length-1].eventType===T.t.RESUME){const c=[...l].reverse();r=c.find(A=>![T.t.PAUSE,T.t.RESUME].includes(A.eventType));const O=c.findIndex(A=>A.key===r.key);for(let A=0;A<O;A+=2)a-=+c[A].date-+c[A+1].date}return this.interval$.pipe((0,u.U)(()=>{const c=l[l.length-1].eventType!==T.t.RESUME?new Date(+new Date-+l[l.length-1].date):new Date(+new Date-+r.date+a);return{days:Math.trunc(+c/864e5),time:c}}))}))}ngOnInit(){this.store.dispatch((0,C.dY)({})),this.store.dispatch(X({})),this.audioService.unlock()}raiseEvent(o,_){switch(this.eventTemplate=o,o.eventType){case T.t.TEXT:this.timestamp=new Date,this.displayTextRecordDialog=!0;break;case T.t.PHOTO:this.displayPhotoRecordDialog=!0;break;case T.t.AUDIO:this.displayAudioRecordDialog=!0;break;default:this.store.dispatch((0,C.ae)({eventTemplate:o,logId:_,date:new Date}))}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.yh),e.Y36(Fo.Q),e.Y36(B.C_))},t.\u0275cmp=e.Xpm({type:t,selectors:[["el-record"]],decls:1,vars:1,consts:function(){let n,o,_,i;return n=$localize`:Page headline@@RecordComponent\:header:Record Event`,o=$localize`:Table container headline@@RecordComponent\:tableContainerHeadline:Recorded Events`,_=$localize`:Table headline@@RecordComponent\:tableHeadline:Recorded Events`,i=$localize`:Error message@@RecordComponent\:error:No configured events found. Please add some events to your template first.`,[[4,"ngrxLet"],[4,"ngIf"],[3,"visible","textEventTemplate","logId","timestamp","visibleChange"],[3,"visible","photoEventTemplate","logId","visibleChange"],[3,"visible","audioEventTemplate","logId","visibleChange"],["pTemplate","header"],["class","grid",4,"ngrxLet"],[1,"grid","m-0","w-full"],[1,"col-8","md:col-5","font-light","text-500","p-0"],[1,"col-4","md:col-2","p-0","text-right","md:text-center","font-light"],[1,"el-font-monospace"],[1,"hidden","md:block","md:col-5","font-light","text-500","p-0","text-right"],["class","col-12 p-0 text-center pt-2",4,"ngIf"],["class","col-12 p-0 text-center pt-1",4,"ngIf"],[1,"col-12","p-0","text-center","pt-2"],["class","font-light text-3xl el-font-monospace",4,"ngIf"],[1,"font-light","text-3xl","el-font-monospace"],[1,"col-12","p-0","text-center","pt-1"],["class","el-font-monospace",3,"ngClass",4,"ngIf"],[1,"el-font-monospace",3,"ngClass"],[1,"grid"],["header",n,1,"col-12","lg:col-5","text-center","py-2"],[4,"ngFor","ngForOf"],[1,"col-12","lg:hidden"],["header",o,"styleClass","p-0",3,"selected"],["breakpoint","550px","styleClass","p-datatable-striped p-datatable-sm",3,"records","template","showDataColumn","showRevokeButton"],["header",_,"styleClass","p-0",1,"hidden","col-7","lg:block"],["styleClass","p-datatable-striped p-datatable-sm",3,"records","template","showDataColumn","showRevokeButton"],["pButton","","pRipple","",3,"icon","label","disabled","click"],i]},template:function(o,_){1&o&&e.YNc(0,Gt,6,13,"ng-container",0),2&o&&e.Q6J("ngrxLet",_.log$)},directives:[I.eJ,d.O5,ee.s,L.jx,d.mk,d.sg,S.Hq,f.H,Le.UQ,Le.US,Ee,Ko,it,dt],pipes:[d.Ov,d.uU,y.fS,ge.z,B.b3],styles:["[_nghost-%COMP%]     .el-record-event-button.p-button{border-color:transparent;padding:.5rem .75rem}[_nghost-%COMP%]     .el-record-event-button.p-button span{word-wrap:break-word;overflow-wrap:anywhere;word-wrap:anywhere}[_nghost-%COMP%]     .el-record-event-button.p-button .p-button-icon-left{font-size:1.5rem;margin-right:0}[_nghost-%COMP%]     .el-record-event-button.p-button .p-button-label{font-weight:unset;font-size:.8rem}[_nghost-%COMP%]     .p-0 .p-panel-content, [_nghost-%COMP%]     .p-accordion-content{padding:0}[_nghost-%COMP%]     .py-2 .p-panel-content, [_nghost-%COMP%]     .p-accordion-content{padding:.5rem 0}.el-record-event-button[_ngcontent-%COMP%]{display:inline-grid;width:7rem;min-height:6.25rem}"]}),t})()}]}];let vt=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[Q.Bz.forChild(At)],Q.Bz]}),t})();var E=g(6991),M=g(262),G=g(4351),xt=g(6107);let Nt=(()=>{class t{constructor(o,_,i,l,r){this.store=o,this.logService=_,this.recordService=i,this.actions$=l,this.router=r,this.loadLog$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(X),(0,D.w)(a=>this.store.pipe((0,s.Ys)(W.Hm),(0,ue.q)(1),(0,R.h)(c=>!(!c&&!a.id)),(0,D.w)(c=>this.logService.loadLog(c||a.id).pipe((0,u.U)(O=>ie({log:O})),(0,M.K)(O=>(0,m.of)(j({error:O}))))))))),this.createLog$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(k),(0,G.b)(a=>this.logService.createLog(a.templateId,a.title,a.desc).pipe((0,u.U)(c=>P.zS({log:c})),(0,M.K)(c=>(0,m.of)(F({error:c}))))))),this.updateLog$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(V),(0,G.b)(a=>this.logService.updateLog(a.log).pipe((0,u.U)(c=>P.S4({log:c})),(0,M.K)(c=>(0,m.of)($({error:c}))))))),this.deleteLog$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(K),(0,G.b)(a=>this.recordService.deleteRecords(a.log.id).pipe((0,G.b)(()=>this.logService.deleteLog(a.log).pipe((0,u.U)(c=>P.RC({log:c})),(0,M.K)(c=>(0,m.of)(Y({error:c}))))),(0,M.K)(c=>(0,m.of)(Y({error:c}))))))),this.createRecordSuccess$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(C.iz),(0,G.b)(a=>this.logService.loadLog(a.record.logId).pipe((0,G.b)(c=>this.logService.updateLog(Object.assign(Object.assign({},c),{recordsCount:c.recordsCount+1})).pipe((0,M.K)(O=>(0,m.of)($({error:O})))))))),{dispatch:!1}),this.revokeRecordSuccess$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(C.S5),(0,G.b)(a=>this.logService.loadLog(a.logId).pipe((0,G.b)(c=>this.logService.updateLog(Object.assign(Object.assign({},c),{recordsCount:c.recordsCount-1})).pipe((0,M.K)(O=>(0,m.of)($({error:O})))))))),{dispatch:!1}),this.deleteRecordsSuccess$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(C.Qu),(0,G.b)(a=>this.logService.loadLog(a.logId).pipe((0,G.b)(c=>this.logService.updateLog(Object.assign(Object.assign({},c),{recordsCount:0})).pipe((0,M.K)(O=>(0,m.of)($({error:O})))))))),{dispatch:!1}),this.loadLogFailure$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(j),(0,Oe.b)(()=>this.router.navigate(["logs"])),(0,D.w)(a=>(0,m.of)((0,b._N)({summary:$localize`:Log not found error@@LogEffects\:loadLogFailureHeadline:Error while loading log!`,detail:a.error}))))),this.createLogFailure$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(F),(0,D.w)(a=>(0,m.of)((0,b._N)({summary:$localize`:Log not created error@@LogEffects\:createLogFailureHeadline:Error while creating log!`,detail:a.error}))))),this.updateLogFailure$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)($),(0,D.w)(a=>(0,m.of)((0,b._N)({summary:$localize`:Log not updated error@@LogEffects\:updateLogFailureHeadline:Error while updating log!`,detail:a.error}))))),this.deleteLogFailure$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(Y),(0,D.w)(a=>(0,m.of)((0,b._N)({summary:$localize`:Log not deleted error@@LogEffects\:deleteLogFailureHeadline:Error while deleting log!`,detail:a.error})))))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(s.yh),e.LFG(xt.$),e.LFG(pe.B),e.LFG(E.eX),e.LFG(Q.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var bt=g(3630);let Mt=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.ez,vt,bt.W,s.Aw.forFeature("log",Se),E.sQ.forFeature([Nt])]]}),t})()}}]);